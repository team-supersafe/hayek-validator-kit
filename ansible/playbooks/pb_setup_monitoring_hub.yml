---
# Setup a monitoring hub server
# --------------------
# Usage:
# ------
# Run from /ansible directory:
#
#
# ansible-playbook playbooks/pb_setup_monitoring_hub.yml \
#   -i solana_localnet.yml \ # In production, use the inventory solana_host_monitoring.yml
#   -e "target_host=host-monitoring" \
#   -e "ansible_user=monitor" \
#   -e "tmp_grafana_default_admin_user=admin" \
#   -e "tmp_grafana_default_admin_password=admin" \
#   -e "grafana_admin_password=NewPassword" \
#   -e "tmp_influxdb_default_admin_user=admin" \
#   -e "tmp_influxdb_default_admin_password=adminpass" \
#   -e "tmp_influxdb_default_org=HayekOrg" \
#   -e "tmp_influxdb_default_bucket=HayekBucket" \
#   -K

- name: Setup monitoring hub server
  hosts: "{{ target_host }}"
  user: "{{ ansible_user }}"
  become: true
  pre_tasks:
    - name: Confirm target host before applying changes
      ansible.builtin.import_tasks: ../roles/common/tasks/confirm_target_host.yml

  roles:
    - monitoring_hub
