---
# Verify that all required variables and inputs are present before proceeding
- name: Precheck role imputs
  import_tasks: precheck.yml

# Initial cleanup of any temporary files or previous failed states
- name: Cleanup
  import_tasks: cleanup.yml

# Create system users, assign groups, and configure SSH access
- name: Create users
  import_tasks: create_users.yml

# Configure RBAC sudoers files
- name: Configure RBAC sudoers
  import_tasks: configure_sudoers.yml

# Final cleanup of any temporary files created during execution
- name: Cleanup
  import_tasks: cleanup.yml

# Disable ubuntu user and block SSH access
- name: Disable ubuntu user
  import_tasks: disable_ubuntu.yml
