# Validator Operators - Service management and monitoring
# This file is managed by Ansible - DO NOT EDIT MANUALLY

# Allow group members to become validator_operators without password
# This is required for Ansible to use become_user: validator_operators

# Service control commands
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/systemctl start {{ validator_service }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/systemctl stop {{ validator_service }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/systemctl restart {{ validator_service }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/systemctl status {{ validator_service }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/systemctl stop cron
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/systemctl start cron
# Process management
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/pkill -f {{ validator_service }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/kill -9
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/renice

# Log management
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/journalctl -u {{ validator_service }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/tail -f {{ validator_log_file }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/tail -n 100 {{ validator_log_file }}

# Configuration viewing (read-only)
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/cat {{ validator_config_dir }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/ls -la {{ validator_config_dir }}

# Directory space monitoring
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/du -sh {{ validator_ledger_dir }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/du -sh {{ validator_accounts_dir }}

# Network monitoring
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/netstat -tulpn
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/ss -tulpn
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/lsof -i

# System monitoring
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/top -n 1
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/htop
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/free -h
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/df -h
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/uptime

# Process monitoring
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/ps aux
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/pgrep -f {{ validator_service }}

# File monitoring
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/ls -lah {{ validator_ledger_dir }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/ls -lah {{ validator_accounts_dir }}
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/find {{ validator_ledger_dir }} -name "*.log" -type f
%validator_operators ALL=(ALL) NOPASSWD: /usr/bin/find {{ validator_accounts_dir }} -name "*.log" -type f
