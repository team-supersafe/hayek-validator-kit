---
# CSV file containing user information (username, groups, email, etc.)
authorized_access_csv: "~/new-metal-box/{{ csv_file }}"

# Fail2ban configuration
fail2ban:
  sshd:
    maxretry: 3
    findtime: 300
    bantime: 3600
    ignoreip: "127.0.0.1"


# Timezone configuration for the server
timezone: "America/New_York"

# User configuration for Solana validator
sol_owner: "sol"
validator_group: "validator_operators"

# CPU configuration
cpu_config:
  isolated_cores: "2,26"
  irq_cores: "0-1,3-25,27-47"
  pstate: "active"

# SSH Configuration
ssh_config:
  port: 2522
  permit_root_login: "no"
  pubkey_authentication: "yes"
  password_authentication: "no"
  kbd_interactive_authentication: "no"
  challenge_response_authentication: "no"

# Firewall Configuration
firewall:
  ssh_port: 2522
  tcp_ports:
    - 1234
    - 9090
  tcp_ranges:
    - 8000:8030
  udp_ranges:
    - 8000:8030
  denied_ports:
    - 8899
    - 8900

# Validator directory configuration
validator_directory_name: "validator"
validator_directory:
  name: "{{ validator_directory_name }}"
  path: "/opt/{{ validator_directory_name }}"
  owner: "{{ sol_owner }}"
  group: "{{ validator_group }}"
  mode: '2575'
  scripts_subdir: "scripts"

# Mount directories list
mount_directories:
  - ledger
  - accounts
  - snapshots

# Disk configuration
# Minimum number of disks required for validator setup
min_required_disks: 3

# Mount points
mount_points:
  ledger: "/mnt/ledger"      # For ledger data (largest disk)
  accounts: "/mnt/accounts"  # For accounts data (second largest)
  snapshots: "/mnt/snapshots" # For snapshots (third largest)

# Mount point permissions
mount_point_permissions:
  owner: "{{ sol_owner }}"
  group: "{{ validator_group }}"
  mode: '2775'

# Filesystem formats for each component
filesystem_formats:
  ledger: "xfs"    # High-performance filesystem for ledger
  accounts: "xfs"  # High-performance filesystem for accounts
  snapshots: "ext4" # Standard filesystem for snapshots

# Health check configuration
# Script to monitor validator health
health_check:
  script_name: "health_check.sh"
  dest_path: "{{ validator_directory.path }}/{{ validator_directory.scripts_subdir }}/{{ health_check.script_name }}"
  owner: "{{ sol_owner }}"
  group: "{{ validator_group }}"
  mode: "0575"
