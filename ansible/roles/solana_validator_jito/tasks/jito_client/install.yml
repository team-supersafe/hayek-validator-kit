---
- name: Set Jito tag
  ansible.builtin.set_fact:
    jito_tag: "v{{ jito_version }}"

- name: Determine if we should build from source
  ansible.builtin.set_fact:
    should_build_from_source: "{{ jito_force_build | default(false) or build_from_source }}"

- name: Install Jito-Solana from binaries
  import_tasks: jito_install.yml
  when: not should_build_from_source

- name: Build Jito-Solana from source
  import_tasks: jito_build_from_source.yml
  when: should_build_from_source

- name: Installation complete
  debug:
    msg: >-
      Jito-Solana {{ jito_version }} has been successfully installed
      {% if should_build_from_source %}
      (built from source)
      {% else %}
      (from binaries)
      {% endif %}
