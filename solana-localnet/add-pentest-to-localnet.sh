# This container is used to run penetration testing tools against the Solana localnet.
# It is designed to be run in the same network as the localnet.
# The container will install necessary tools and provide an interactive shell for testing.
# The container will be named 'pentest' and will run Kali Linux.
# The container itself is ephemeral and will be removed after use.
# Note: This script assumes that the 'solana-localnet_solana_network' network exists.

#!/bin/bash
docker run \
    --network=solana-localnet_solana_network \
    -h pentest \
    -it \
    --rm \
    --name pentest \
    kalilinux/kali-rolling \
    bash -c "
        apt update && \
        apt install -y net-tools nmap metasploit-framework && \
        echo && \
        echo 'Kali Linux Pentest Container is ready. You can now run your penetration testing tools.' && \
        echo 'For example, you can run:' && \
        echo '1. Find this container IP address' && \
        echo 'hostname -i' && \
        echo '2. Scan a target IP address' && \
        echo 'nmap -sV -p 22 172.25.0.11' && \
        echo '3. Start the Metasploit console' && \
        echo 'msfconsole' && \
        echo '4. Configure the Metasploit target host IP and port:' && \
        echo 'msf6 > set rhosts 172.25.0.11' && \
        echo 'msf6 > set rport 22' && \
        echo '5. Configure loopback IP, used to send data back from target host:' && \
        echo 'msf6 > set lhost 172.25.0.2' && \
        echo '6. Use Metasploit modules to test the SSH port' && \
        echo 'msf6 > use auxiliary/scanner/ssh/ssh_version' && \
        echo 'msf6 > exploit' && \
        echo && \
        echo 'To exit the container, type exit or press Ctrl+D.' && \
        bash
    "
